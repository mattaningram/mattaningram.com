---
import BaseLayout from '@layouts/BaseLayout.astro'
import Header from '@components/Header.astro'
import Footer from '@components/Footer.astro'
import Button from '@components/Button.astro'
import PerspectiveScroll from '@components/PerspectiveScroll.astro'
import { Image } from 'astro:assets'
import metmeIcon from '@media/metme/metme-ios-icon.png'
---

<BaseLayout
	title="MetMe - Smart Contact Management for iOS"
	description="Add contacts naturally with AI-powered context. Fast, simple, and completely private."
	pageColor="oklch(76.9% 0.188 70.08)"
	class="metme-page"
>
	<Header />

	<main class="metme-main">
		<!-- Hero Section -->
		<section class="metme-hero">
			<div class="hero-content xyz-in" xyz="fade up-2 duration-6 stagger">
				<div class="hero-icon xyz-nested">
					<Image src={metmeIcon} alt="MetMe App Icon" class="app-icon" width={200} height={200} layout="constrained" />
				</div>

				<h1 class="hero-title xyz-nested">metme</h1>

				<p class="hero-tagline xyz-nested">
					Remember everyone you meet. Add contacts <em>instantly</em> with text or voice. Faster than native iOS.
					<strong>100% private</strong> ‚Äî AI runs entirely on your device.
				</p>

				<div class="hero-badges xyz-nested">
					<span class="badge">iOS App</span>
					<span class="badge">On-device AI</span>
					<span class="badge">No cloud required</span>
				</div>
			</div>
		</section>

		<!-- iPhone Demo Section -->
		<PerspectiveScroll as="section" class="metme-demo">
			<div class="iphone-mockup xyz-in" xyz="fade small-3 duration-8 delay-3">
				<div class="iphone-frame">
					<div class="iphone-notch"></div>
					<div class="iphone-screen">
						<!-- Placeholder for demo video -->
						<div class="demo-placeholder">
							<div class="placeholder-content">
								<span class="placeholder-icon">‚ñ∂</span>
								<span class="placeholder-text">Demo video</span>
							</div>
						</div>
						<!-- When video is ready, replace with:
						<video autoplay loop muted playsinline>
							<source src="/assets/videos/metme/demo.webm" type="video/webm" />
							<source src="/assets/videos/metme/demo.mp4" type="video/mp4" />
						</video>
						-->
					</div>
				</div>
			</div>
		</PerspectiveScroll>

		<!-- TestFlight CTA Section -->
		<section class="metme-cta xyz-in" xyz="fade up-2 duration-6">
			<h2 class="cta-title">Join the Beta</h2>
			<p class="cta-description">MetMe is currently in TestFlight beta. Try it free on your iPhone.</p>
			<Button href="https://testflight.apple.com/join/EQErxJEX" class="cta-button"> Get it on TestFlight </Button>
			<p class="cta-note">iOS only. Free during beta.</p>
		</section>

		<!-- Features Section -->
		<section class="metme-features">
			<h2 class="features-title xyz-in" xyz="fade duration-6">How it works</h2>

			<div class="features-grid xyz-in" xyz="fade up-2 duration-6 stagger">
				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">üí¨</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">Type naturally</h3>
						<p class="feature-description">"Met Sarah at the coffee shop, she's a designer at Google"</p>
					</div>
				</div>

				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">üé§</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">Or just speak</h3>
						<p class="feature-description">Dictate new contacts hands-free while on the go</p>
					</div>
				</div>

				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">üó∫Ô∏è</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">See where you met</h3>
						<p class="feature-description">Map view shows the location of every encounter</p>
					</div>
				</div>

				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">üìÖ</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">Timeline view</h3>
						<p class="feature-description">Browse contacts chronologically to jog your memory</p>
					</div>
				</div>

				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">‚ú®</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">Context added automatically</h3>
						<p class="feature-description">AI extracts names, companies, and notes from your input</p>
					</div>
				</div>

				<div class="feature-card xyz-nested">
					<div class="feature-media">
						<div class="media-placeholder">
							<span class="media-icon">üîí</span>
						</div>
					</div>
					<div class="feature-content">
						<h3 class="feature-title">Completely private</h3>
						<p class="feature-description">All processing happens on-device. Your data never leaves your phone.</p>
					</div>
				</div>
			</div>
		</section>
	</main>

	<Footer />
</BaseLayout>

<style lang="scss">
	@use '../styles/scssVariables' as *;

	/* Amber palette */
	:global(.metme-page) {
		--amber-50: oklch(98.7% 0.022 95.277);
		--amber-100: oklch(96.2% 0.059 95.617);
		--amber-200: oklch(92.4% 0.12 95.746);
		--amber-300: oklch(87.9% 0.169 91.605);
		--amber-400: oklch(82.8% 0.189 84.429);
		--amber-500: oklch(76.9% 0.188 70.08);
		--amber-600: oklch(66.6% 0.179 58.318);
		--amber-700: oklch(55.5% 0.163 48.998);
		--amber-800: oklch(47.3% 0.137 46.201);
		--amber-900: oklch(41.4% 0.112 45.904);
		--amber-950: oklch(27.9% 0.077 45.635);

		/* Stone palette */
		--stone-50: oklch(98.5% 0.001 106.423);
		--stone-100: oklch(97% 0.001 106.424);
		--stone-200: oklch(92.3% 0.003 48.717);
		--stone-300: oklch(86.9% 0.005 56.366);
		--stone-400: oklch(70.9% 0.01 56.259);
		--stone-500: oklch(55.3% 0.013 58.071);
		--stone-600: oklch(44.4% 0.011 73.639);
		--stone-700: oklch(37.4% 0.01 67.558);
		--stone-800: oklch(26.8% 0.007 34.298);
		--stone-900: oklch(21.6% 0.006 56.043);
		--stone-950: oklch(14.7% 0.004 49.25);

		/* Override site variables */
		--bg-color: var(--stone-950);
		--page-color: var(--amber-500);

		background: var(--bg-color);
		color: var(--stone-100);
	}

	.metme-main {
		overflow-x: hidden;
	}

	/* Hero Section */
	.metme-hero {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
		min-height: 60vh;
		padding: var(--spacing-16) var(--page-gutter);
		padding-top: 10vh;

		@media (width >= $breakpoint-md) {
			min-height: 50vh;
			padding-top: 5vh;
		}
	}

	.hero-content {
		max-width: 42rem;
	}

	.hero-icon {
		margin: 0 auto var(--spacing-8);
		display: grid;
		place-content: center;
		filter: drop-shadow(0 8px 48px oklch(76.9% 0.188 70.08 / 0.3)) drop-shadow(0 0 10px oklch(76.9% 0.188 70.08 / 0.5));
	}

	.icon-placeholder {
		font-size: 3rem;
		font-weight: 700;
		color: var(--stone-950);

		@media (width >= $breakpoint-sm) {
			font-size: 3.5rem;
		}
	}

	.hero-title {
		font-size: clamp(2rem, 6vw, 3.5rem);
		font-weight: 700;
		line-height: 1.1;
		color: var(--stone-50);
		margin-bottom: var(--spacing-6);
	}

	.hero-tagline {
		font-size: clamp(1.1rem, 2.5vw, 1.35rem);
		line-height: 1.6;
		color: var(--stone-300);
		margin-bottom: var(--spacing-8);

		em {
			color: var(--amber-400);
			font-style: normal;
			font-weight: 500;
		}

		strong {
			color: var(--amber-300);
			font-weight: 600;
		}
	}

	.hero-badges {
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		gap: var(--spacing-3);
	}

	.badge {
		font-size: 0.8rem;
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		padding: var(--spacing-2) var(--spacing-4);
		background: var(--stone-800);
		color: var(--stone-300);
		border: 1px solid var(--stone-700);
		border-radius: 100px;
	}

	/* iPhone Demo Section */
	.metme-demo {
		display: flex;
		justify-content: center;
		padding: var(--spacing-12) var(--page-gutter);
	}

	.iphone-mockup {
		width: 280px;

		@media (width >= $breakpoint-sm) {
			width: 320px;
		}

		@media (width >= $breakpoint-md) {
			width: 360px;
		}
	}

	.iphone-frame {
		position: relative;
		background: var(--stone-900);
		border: 3px solid var(--stone-700);
		border-radius: 40px;
		padding: 12px;
		box-shadow:
			0 0 0 1px var(--stone-800),
			0 20px 60px oklch(0% 0 0 / 0.5);

		@media (width >= $breakpoint-sm) {
			border-radius: 48px;
			padding: 14px;
		}
	}

	.iphone-notch {
		position: absolute;
		top: 12px;
		left: 50%;
		transform: translateX(-50%);
		width: 35%;
		height: 28px;
		background: var(--stone-900);
		border-radius: 0 0 16px 16px;
		z-index: 10;

		@media (width >= $breakpoint-sm) {
			top: 14px;
			height: 32px;
		}
	}

	.iphone-screen {
		aspect-ratio: 9 / 19.5;
		background: var(--stone-950);
		border-radius: 28px;
		overflow: hidden;

		@media (width >= $breakpoint-sm) {
			border-radius: 34px;
		}

		video {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	.demo-placeholder {
		width: 100%;
		height: 100%;
		display: grid;
		place-content: center;
		background: linear-gradient(180deg, var(--stone-900), var(--stone-950));
	}

	.placeholder-content {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: var(--spacing-4);
		color: var(--stone-500);
	}

	.placeholder-icon {
		font-size: 2.5rem;
		opacity: 0.5;
	}

	.placeholder-text {
		font-size: 0.875rem;
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}

	/* CTA Section */
	.metme-cta {
		text-align: center;
		padding: var(--spacing-16) var(--page-gutter);
		max-width: 32rem;
		margin: 0 auto;
	}

	.cta-title {
		font-size: clamp(1.75rem, 4vw, 2.5rem);
		font-weight: 700;
		color: var(--stone-50);
		margin-bottom: var(--spacing-4);
	}

	.cta-description {
		font-size: 1.1rem;
		color: var(--stone-400);
		margin-bottom: var(--spacing-8);
	}

	.cta-note {
		margin-top: var(--spacing-6);
		font-size: 0.875rem;
		color: var(--stone-500);
	}

	:global(.cta-button) {
		font-size: 1.1rem;
		padding: var(--spacing-5) var(--spacing-10);
	}

	/* Features Section */
	.metme-features {
		padding: var(--spacing-16) var(--page-gutter);
		max-width: var(--page-content-width);
		margin: 0 auto;
	}

	.features-title {
		font-size: clamp(1.75rem, 4vw, 2.5rem);
		font-weight: 700;
		color: var(--stone-50);
		text-align: center;
		margin-bottom: var(--spacing-12);
	}

	.features-grid {
		display: grid;
		grid-template-columns: 1fr;
		gap: var(--spacing-8);

		@media (width >= $breakpoint-sm) {
			grid-template-columns: repeat(2, 1fr);
		}

		@media (width >= $breakpoint-lg) {
			grid-template-columns: repeat(3, 1fr);
		}
	}

	.feature-card {
		background: var(--stone-900);
		border: 1px solid var(--stone-800);
		border-radius: 12px;
		overflow: hidden;
		transition: border-color 0.2s ease-out;

		&:hover {
			border-color: var(--amber-500);
		}
	}

	.feature-media {
		aspect-ratio: 4 / 3;
		background: var(--stone-950);
	}

	.media-placeholder {
		width: 100%;
		height: 100%;
		display: grid;
		place-content: center;
	}

	.media-icon {
		font-size: 3rem;
	}

	.feature-content {
		padding: var(--spacing-6);
	}

	.feature-title {
		font-size: 1.15rem;
		font-weight: 600;
		color: var(--amber-400);
		margin-bottom: var(--spacing-2);
	}

	.feature-description {
		font-size: 0.95rem;
		color: var(--stone-400);
		line-height: 1.5;
	}
</style>
