---
import BaseLayout from './BaseLayout.astro'
import Footer from '../components/Footer.astro'

export interface Props {
	title: string
	year: string
	position: string
	logo?: string
	logoOpen?: string
	workUrl?: string
	color: string
	description: string
	details?: string[]
}

const { title, year, position, logo, logoOpen, workUrl, color, description, details } = Astro.props
---

<BaseLayout title={title} pageColor={color} class={`page-wrap ${title.toLowerCase().replace(/\s+/g, '-')}-wrap`}>
	<div class="work-background"></div>

	<main>
		<div class="work-header-wrap">
			<header class="work-header xyz-in" xyz="fade down duration-5 ease-out-back">
				<div class="work-header-top">
					<div class="work-title-wrap xyz-in" xyz="fade left delay-4 ease-out-back">
						{
							logoOpen ? (
								<img class="work-logo" src={`/assets/logos/${logoOpen}`} alt={`${title} Logo`} />
							) : logo ? (
								<img class="work-logo" src={`/assets/logos/${logo}`} alt={`${title} Logo`} />
							) : (
								<h1 class="work-title">{title}</h1>
							)
						}
					</div>
					{
						workUrl && (
							<a href={workUrl} class="work-link button--themed" target="_blank">
								<span class="button__text">Visit</span>
							</a>
						)
					}
				</div>
				<div class="work-header-bottom">
					<div class="work-detail">{year}</div>
					<div class="work-detail">{position}</div>
					{details && details.map((detail) => <div class="work-detail">{detail}</div>)}
				</div>
			</header>
		</div>

		<div class="grab-copy-wrap">
			<p class="grab-copy" set:html={description} />
		</div>

		<slot />
	</main>

	<Footer />

	<style define:vars={{ pageColor: color }}>
		:root {
			--page-color: var(--pageColor);
		}
	</style>
</BaseLayout>
